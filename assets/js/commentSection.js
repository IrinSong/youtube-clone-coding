(()=>{const e=document.getElementById("videoContainer"),t=document.getElementById("commentForm"),n=(document.getElementById("videoComment"),document.getElementById("commentInput")),d=document.querySelectorAll("#delete-comment");t&&t.addEventListener("submit",(async d=>{d.preventDefault();const{id:o,avatar:m,name:c}=t.dataset,s=n.value,i=e.dataset.id;if(""===s)return;const l=await fetch(`/api/videos/${i}/comment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:s})});if(201===l.status){n.value="";const{newCommentId:e}=await l.json();((e,t,n,d,o)=>{const m=document.querySelector(".video__comments ul"),c=document.createElement("li");c.dataset.id=o,c.className="video__comment";const s=document.createElement("a");s.href=`/users/${e}`;const i=document.createElement("img");i.className="video__comment-img",i.src=`/${t}`;const l=document.createElement("div");l.className="video__comment-data";const r=document.createElement("div");r.className="video__comment-name";const p=document.createElement("a");p.href=`/users/${e}`,p.innerText=`@${n}`;const u=document.createElement("small");u.innerText="지금";const v=document.createElement("div");v.className="video__comment-text",v.innerText=`${d}`;const E=document.createElement("span");E.id="delete-comment",E.className="material-symbols-outlined",E.innerText="close",r.appendChild(p),r.appendChild(u),l.appendChild(r),l.appendChild(v),s.appendChild(i),c.appendChild(s),c.appendChild(l),c.appendChild(E),m.prepend(c),E.addEventListener("click",a)})(o,m,c,s,e)}}));const a=async t=>{const n=t.target.parentNode,d=e.dataset.id,a=n.dataset.id;console.log(a),200===(await fetch(`/api/videos/${d}/comments/${a}/delete`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({videoId:d,commentId:a})})).status&&n.remove()};d&&d.forEach((e=>e.addEventListener("click",a)))})();